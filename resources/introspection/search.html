<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8"/>

    <title>RSB Web: Introspection</title>

    <link rel="stylesheet" type="text/css" href="base.css"/>

    <style>
      #search-help ul li:not(:first-child):before {
          content: "|";
      }
      #search-help ul li {
          display: inline;
          list-style-type: none;
      }
    </style>
  </head>

  <body>

    <header>
      <nav class="navbar navbar-inverse" role="navigation">
        <div class="container-fluid">
          <div class="navbar-header">
            <a class="navbar-brand" href="https://code.cor-lab.org/projects/rsb">
              <img alt="Brand" src="/images/logo.png"/>
            </a>
          </div>
          <ol class="nav navbar-nav">
            <ol class="breadcrumb">
              <li><a id="breadcrumbs-root" href="../index.html"><span class="glyphicon glyphicon-home"></span></a></li>
              <li><a id="breadcrumbs-introspection" href="root.html">Introspection</a></li>
              <li class="active">Search</li>
            </ol>
          </ol>
        </div>
      </nav>
    </header>

    <main class="container-fluid">
      <div class="panel panel-default">
        <div class="panel-body">
          <form id="search" role="search"></form>
          <small id="search-help">
            <ul>
              <li>
                Simple queries searching for one or more words in all
                attributes <a href="?query=linux"><code>linux</code></a>
              </li>
              <li>
                Select host, process or participant nodes
                with <a href="?query=//host"><code>//host</code></a>,
                <a href="?query=//process"><code>//process</code></a>,
                <a href="?query=//participant"><code>//participant</code></a>
              </li>
              <li>
                Select attributes
                with <a href="?query=//@id"><code>//@id</code></a>
              </li>
              <li>
                Combine the two
                <a href="?query=//host/@id"><code>//host/@id</code></a>
              </li>
              <li>
                Restrict matches with predicates
                <a href="?query=//participant[@kind!=&quot;listener&quot;]"><code>//participant[@kind!="listener"]</code></a>
              </li>
              <li>
                Substring
                match <a href="?query=//participant/@scope[contains(., &quot;/&quot;)]">
                  <code>//participant/@scope[contains(., "/")]</code>
                </a>
              </li>
            </ul>
          </small>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h2 class="panel-title">
            Matches
            <span id="result-count" class="badge"></span>
          </h2>

        </div>
        <div class="panel-body">
          <div class="container-fluid">
            <div class="row">
              <div id="result-list" class="col-md-8"></div>
              <div id="result-plot" class="col-md-4" style="display: none"></div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer>
      Generated by <a href="https://code.cor-lab.org/projects/rsb">RSB</a> web
      |
      <a href="/hack.html">Modify this web interface</a>
    </footer>

    <script type="text/javascript" src="../lib/jquery-2.1.3/jquery.min.js"></script>

    <script type="text/javascript" src="../lib/bootstrap-3.3.5/js/bootstrap.min.js"></script>

    <script type="text/javascript" src="../lib/flot-0.8.3/jquery.flot.min.js"></script>
    <script type="text/javascript" src="../lib/flot-0.8.3/jquery.flot.pie.min.js"></script>

    <script type="text/javascript" src="Introspection.js"></script>
    <script type="text/javascript" src="SearchWidget.js"></script>
    <script type="text/javascript" src="introspection.js"></script>

    <script type="text/javascript">
      var introspection = new Introspection();
      var search        = new SearchWidget(introspection, $('#search'));

      $(function () {
          search.on('submit', function(event) {
              showRunning($('#result-list'), $('#result-count'));
          });
          search.on('result', function(event, result) {
              showResults($('#result-list'), $('#result-count'),
                          $('#result-plot'), result);
          });
          search.on('error', function(event, error) {
              showError($('#result-list'), $('#result-count'), error);
          });
          var query = getURLParameter('query');
          if (query) {
              search.setValue(query);
              search.search();
          }
      })
    </script>

  </body>
</html>
